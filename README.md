# Analyzer

## Installation

1. Install spaCy with Japanese support.
```shell
pip install -U pip setuptools wheel
pip install -U spacy
python -m spacy download ja_core_news_sm
```
2. Install Node.js. The easiest way is using nvm: https://github.com/nvm-sh/nvm
3. Install yarn.
```shell
npm install --global yarn
```
4. Install JavaScript dependencies.
```shell
yarn install
```
5. Prepare the environment variables. Copy the `.env.example` file to `.env`.
6. Download the [JMdict](http://www.edrdg.org/wiki/index.php/JMdict-EDICT_Dictionary_Project) dictionary file into the `dict` directory. The file can be downloaded from: http://ftp.edrdg.org/pub/Nihongo/JMdict.gz
7. Generate the `dict.json` file.
```shell
yarn nx serve generate-dict-json --watch=false
```

## Tests

Run all the tests:
```shell
yarn jest --setupFiles=dotenv/config
```

*Note that the tests were created for the version of the JMdict dictionary file from 2022-12-08.*

## Preview

You can generate preview files in both plain text and LaTex formats using the following command:

```shell
yarn nx serve preview --watch=false
```

This will generate the preview files in `dist/preview`.

To compile the LaTex files, please use LuaLaTex.

The sentences used in the preview are listed in `apps/preview/src/main.ts`.

---

<a href="https://nx.dev" target="_blank" rel="noreferrer"><img src="https://raw.githubusercontent.com/nrwl/nx/master/images/nx-logo.png" width="45"></a>

✨ **This workspace has been generated by [Nx, a Smart, fast and extensible build system.](https://nx.dev)** ✨

## Understand this workspace

Run `nx graph` to see a diagram of the dependencies of the projects.

## Remote caching

Run `npx nx connect-to-nx-cloud` to enable [remote caching](https://nx.app) and make CI faster.

## Further help

Visit the [Nx Documentation](https://nx.dev) to learn more.
